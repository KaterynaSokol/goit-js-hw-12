{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getPictures(userInput, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  \n\n  return await axios.get(`${BASE_URL}`, {\n    params: {\n      key: '44667658-9ba2d67695abf8a1c08d7f54b',\n      q: userInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n}\n","// export function picturesTemplate(data) {\n//   const markup = data.hits\n//     .map(image => {\n//       const {\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads,\n//       } = image;\n//       return;\n//       `<li class=\"card\">\n//             <a href=\"${largeImageURL}\" class=\"big gallery-link\">\n//               <img\n//                 src=\"${webformatURL}\"\n//                 alt=\"${tags}\"\n//                 title=\"${tags}\"\n//                 class=\"card-img\"\n//             /></a>\n//             <ul class=\"card-title\">\n//               <li class=\"card-text-blok\">\n//                 <h2 class=\"card-title-text\">Likes</h2>\n//                 <p class=\"card-text-value\">${likes}</p>\n//               </li>\n//               <li class=\"card-text-blok\">\n//                 <h2 class=\"card-title-text\">Views</h2>\n//                 <p class=\"card-text-value\">${views}</p>\n//               </li>\n//               <li class=\"card-text-blok\">\n//                 <h2 class=\"card-title-text\">Comments</h2>\n//                 <p class=\"card-text-value\">${comments}</p>\n//               </li>\n//               <li class=\"card-text-blok\">\n//                 <h2 class=\"card-title-text\">Downloads</h2>\n//                 <p class=\"card-text-value\">${downloads}</p>\n//               </li>\n//             </ul>\n//           </li>`;\n//     })\n//     .join('');\n// }\n\nexport function picturesTemplate(data) {\n  return data\n    .map(\n      img => `<li class=\"card\">\n             <a href=\"${img.largeImageURL}\" class=\"big gallery-link\">\n               <img\n                 src=\"${img.webformatURL}\"\n                 alt=\"${img.tags}\"\n                 title=\"${img.tags}\"\n                 class=\"card-img\"\n             /></a>\n            <ul class=\"card-title\">\n               <li class=\"card-info\">\n                 <h2 class=\"card-text\">Likes</h2>\n                 <p class=\"card-text-value\">${img.likes}</p>\n             </li>\n               <li class=\"card-info\">\n                 <h2 class=\"card-text\">Views</h2>\n                 <p class=\"card-text-value\">${img.views}</p>\n               </li>\n               <li class=\"card-info\">\n                 <h2 class=\"card-text\">Comments</h2>\n                 <p class=\"card-text-value\">${img.comments}</p>\n               </li>\n               <li class=\"card-info\">\n                 <h2 class=\"card-text\">Downloads</h2>\n                 <p class=\"card-text-value\">${img.downloads}</p>\n               </li>\n             </ul> \n           </li>`\n    )\n    .join('');\n}\n","import { getPictures } from './js/pixabay-api.js';\nimport { picturesTemplate } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  searchInput: document.querySelector('.input'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader-wrap'),\n  loadmore: document.querySelector('.load-more-btn'),\n};\nlet page = 1;\nlet userInput = null;\n\nrefs.searchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n  showLoader();\n  page = 1;\n  userInput = e.target.elements.query.value.trim();\n\n  if (userInput === '') {\n    return iziToast.warning({\n      title: 'Warning',\n      message: 'Please, enter the query',\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      messageColor: '#ffffff',\n      position: 'topRight',\n    });\n  }\n\n  try {\n    const {\n      data: { hits, totalHits },\n    } = await getPictures(userInput, page);\n    if (hits.length === 0) {\n      return iziToast.warning({\n        title: 'Warning',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        layout: 2,\n        displayMode: 'once',\n        backgroundColor: '#ef4040',\n        messageColor: '#ffffff',\n        position: 'topRight',\n      });\n    }\n    const markup = picturesTemplate(hits);\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    totalHits > 15 ? showBtn() : hideBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    refs.searchForm.reset();\n    hideLoader();\n  }\n});\n\nrefs.loadmore.addEventListener('click', async e => {\n  page += 1;\n  showLoader();\n  try {\n    const {\n      data: { hits, totalHits },\n    } = await getPictures(userInput, page);\n    refs.gallery.insertAdjacentHTML('beforeend', picturesTemplate(hits));\n    lightbox.refresh();\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const lastPage = Math.ceil(totalHits / 15);\n    if (page === lastPage) {\n      hideBtn();\n      iziToast.warning({\n        title: 'Warning',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        layout: 2,\n        displayMode: 'once',\n        backgroundColor: '#ef4040',\n        messageColor: '#ffffff',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n\nfunction showBtn() {\n  refs.loadmore.classList.remove('is-hidden');\n}\n\nfunction hideBtn() {\n  refs.loadmore.classList.add('is-hidden');\n}\n"],"names":["getPictures","userInput","page","BASE_URL","axios","picturesTemplate","data","img","lightbox","SimpleLightbox","refs","e","showLoader","iziToast","hits","totalHits","markup","showBtn","hideBtn","error","hideLoader","cardHeight","lastPage"],"mappings":"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"}